<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แดชบอร์ดสรุปข้อมูล Wi-Fi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f0f2f5;
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        .card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            padding: 1.5rem;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        .header-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1a202c;
        }
        .sub-header {
            font-size: 0.875rem;
            color: #718096;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800">แดชบอร์ดสรุปข้อมูล Wi-Fi</h1>
            <p class="text-gray-500 mt-1">ภาพรวมประสิทธิภาพและปัญหาของระบบ Wi-Fi ประจำเดือน</p>
        </header>

        <!-- Main Grid Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- 1. Wi-Fi Availability (รายเดือน) -->
            <div class="lg:col-span-2 card">
                <div class="flex justify-between items-start">
                    <div>
                        <h2 class="header-title">Wi-Fi Availability (รายเดือน)</h2>
                        <p class="sub-header">เปอร์เซ็นต์ความพร้อมใช้งานของสัญญาณ Wi-Fi</p>
                    </div>
                    <div class="text-right">
                         <p class="text-3xl font-bold text-green-500" id="avgAvailability">99.85%</p>
                         <p class="text-sm text-gray-500">เฉลี่ยเดือนนี้</p>
                    </div>
                </div>
                <div class="mt-4 chart-container">
                    <canvas id="availabilityChart"></canvas>
                </div>
            </div>

            <!-- 2. จำนวน Fault Wi-Fi แบ่งตาม Zone -->
            <div class="card flex flex-col">
                <h2 class="header-title">จำนวน Fault Wi-Fi ตามโซน</h2>
                <p class="sub-header">สัดส่วนปัญหาที่เกิดขึ้นในแต่ละพื้นที่</p>
                <div class="mt-4 chart-container flex-grow" style="height: 320px;">
                    <canvas id="faultZoneChart"></canvas>
                </div>
            </div>

            <!-- 3. Monthly Usage & User Report -->
            <div class="lg:col-span-3 card">
                <div class="flex flex-col sm:flex-row justify-between items-start mb-4">
                    <div>
                        <h2 class="header-title">สรุปข้อมูลการใช้งานรายสาขา</h2>
                        <p class="sub-header mt-1">ภาพรวมการใช้งานและจำนวนผู้ใช้จาก 15,000 สาขา</p>
                    </div>
                    <button class="mt-4 sm:mt-0 w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 flex items-center justify-center flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                        ดาวน์โหลดรายงานฉบับเต็ม
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-12 mt-4">
                    <div>
                        <h3 class="font-bold text-center text-gray-700">20 อันดับสาขาตามปริมาณการใช้งาน (Usage)</h3>
                        <div class="chart-container mt-2" style="height: 450px;">
                            <canvas id="topUsageChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="font-bold text-center text-gray-700">20 อันดับสาขาตามจำนวนผู้ใช้ (Client)</h3>
                        <div class="chart-container mt-2" style="height: 450px;">
                            <canvas id="topUsersChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Mock Data for top charts ---
        const daysInMonth = Array.from({ length: 30 }, (_, i) => `วันที่ ${i + 1}`);
        const availabilityData = Array.from({ length: 30 }, () => 99.5 + Math.random() * 0.5);
        const avgAvailability = (availabilityData.reduce((a, b) => a + b, 0) / availabilityData.length).toFixed(2);
        document.getElementById('avgAvailability').textContent = `${avgAvailability}%`;

        const faultZones = ['กรุงเทพและปริมณฑล', 'ภาคเหนือ', 'ภาคตะวันออกเฉียงเหนือ', 'ภาคกลาง', 'ภาคตะวันออก', 'ภาคใต้'];
        const faultData = [120, 55, 80, 60, 45, 70];
        const faultColors = ['#4F46E5', '#10B981', '#F59E0B', '#3B82F6', '#EF4444', '#8B5CF6'];

        // --- Real Data from User ---
        const top20ClientData = {
            labels: [
                '19854 - Ao Tonsai Beach', '20200 - พร้อมดินแดง', '19990 - ศาลายามาร์เก็ต', '5038 - ประชานุเคราะห์ 2',
                '3807 - สี่แยกทรายรี', '8354 - ปตท.เพชรบุรีล้ำยุค (วังมะนาว) จุด 1', '1159 - ต้นลำใย', '10281 - ตลาดโต้รุ่งกาญจน์',
                '5039 - ตลาดทรายรี', '1941 - หาดแม่หาด', '19150 - สาย2จอมเทียน ตลาดร่มโพธิ์ (พัทยา)', '8094 - บุลำดวน',
                '6200 - เจ็ดยอดพลาซ่า', '15448 - BMN MRT จตุจักร', '18180 - พัทยาสาย 1 เบย์วอล์ค', '20260 - นาเกลือ ซอย 16-หาดยาว (ชลบุรี)',
                '2233 - อยุธยาเมืองใหม่ ซอย 3', '22515 - Buddy (ถนนข้าวสาร)', '6661 - หอนาฬิกา 2', '202 - เอกมัย'
            ],
            data: [
                10849, 7123, 6733, 6100, 5605, 5274, 5248, 5187, 5001, 4917, 4888, 4680,
                4670, 4274, 4265, 4257, 4212, 4184, 4167, 4138
            ]
        };

        const top20UsageData = {
            labels: [
                '754 - วิเศษชัยชาญ', '13471 - แครายเทพกาญจนา', '5305 - ชุมชนวัดเชิงเขา (สระบุรี)', '18966 - ชุมชนชัยมงคล(ชะอำ)',
                '4061 - ปตท.ดอนหวาย', '9710 - PTTOR ประจักษ์ศิลปาคม', '1159 - ต้นลำใย', '18369 - มิตรสัมพันธ์ ซ.18',
                '6200 - เจ็ดยอดพลาซ่า', '9473 - หอพักสวนดอก (ถ.ศิริมังคลาจารย์)', '18338 - ลาดบัวขาว', '5561 - ตลาดรถไฟบ้านไผ่',
                '3155 - ท่ารถขนส่งอยุธยา', '13486 - PTTOR ธรรมศาลา (ขาเข้า)', '5892 - ตลาดเทศบาล (นครปฐม)', '3955 - PTTORมิตรภาพเลิศสวัสดิ์',
                '18349 - เพิ่มสิน 3', '8780 - ปตท.ตลิ่งชัน (บรมราชชนนี)', '18373 - นาพระชัย', '2233 - อยุธยาเมืองใหม่ ซอย 3'
            ],
            data: [
                953.84, 767.06, 664.63, 633.97, 610.60, 562.67, 552.80, 548.26, 544.86,
                538.86, 533.82, 515.99, 495.62, 492.64, 479.70, 459.21, 452.53, 447.30,
                441.33, 439.32
            ]
        };
        
        // --- Chart Rendering ---
        const availabilityCtx = document.getElementById('availabilityChart').getContext('2d');
        new Chart(availabilityCtx, { type: 'line', data: { labels: daysInMonth, datasets: [{ label: 'Availability (%)', data: availabilityData, borderColor: 'rgba(22, 163, 74, 0.8)', backgroundColor: 'rgba(22, 163, 74, 0.1)', fill: true, tension: 0.4, pointRadius: 0, pointHoverRadius: 6, pointBackgroundColor: 'rgba(22, 163, 74, 1)' }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 98.5, max: 100, ticks: { callback: (value) => value + '%' } }, x: { ticks: { maxRotation: 0, minRotation: 0, autoSkip: true, maxTicksLimit: 15 } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: (context) => `Availability: ${context.raw.toFixed(2)}%` } } } } });
        
        const faultZoneCtx = document.getElementById('faultZoneChart').getContext('2d');
        new Chart(faultZoneCtx, { type: 'doughnut', data: { labels: faultZones, datasets: [{ label: 'จำนวน Faults', data: faultData, backgroundColor: faultColors, hoverOffset: 4, borderWidth: 2, borderColor: '#ffffff' }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { padding: 15, boxWidth: 12, usePointStyle: true, pointStyle: 'circle' } } } } });
        
        const topUsageCtx = document.getElementById('topUsageChart').getContext('2d');
        new Chart(topUsageCtx, { type: 'bar', data: { labels: top20UsageData.labels, datasets: [{ label: 'Usage (GB)', data: top20UsageData.data, backgroundColor: 'rgba(59, 130, 246, 0.7)', borderColor: 'rgba(59, 130, 246, 1)', borderWidth: 1, borderRadius: 4 }] }, options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { beginAtZero: true, title: { display: true, text: 'Usage (GB)' } } } } });
        
        const topUsersCtx = document.getElementById('topUsersChart').getContext('2d');
        new Chart(topUsersCtx, { type: 'bar', data: { labels: top20ClientData.labels, datasets: [{ label: 'จำนวน Client', data: top20ClientData.data, backgroundColor: 'rgba(16, 185, 129, 0.7)', borderColor: 'rgba(16, 185, 129, 1)', borderWidth: 1, borderRadius: 4 }] }, options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { beginAtZero: true, title: { display: true, text: 'จำนวน Client (คน)' } } } } });
    </script>

</body>
</html>
